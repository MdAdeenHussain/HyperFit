<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>{{ category }} | HyperFit</title>

  <!-- GLOBAL NAVBAR STYLES -->
  <link rel="stylesheet" href="{{ url_for('static', filename='css/main.css') }}">

  <!-- SHOP PAGE STYLES -->
  <link rel="stylesheet" href="{{ url_for('static', filename='css/shop.css') }}">
</head>
<body>

<!-- ✅ SAME NAVBAR AS home.html -->
{% include "components/navbar.html" %}

<main class="shop-container">

  <h1 class="shop-title">{{ category }}</h1>

  {% if products %}
  <div class="shop-grid">

    {% for product in products %}
    <div class="product-card">

      <a href="{{ url_for('product_detail', product_id=product.id) }}" class="image-wrap">
        {% set image_path = 'images/' ~ product.image_filename %}
        <img
          src="{{ url_for('static', filename=image_path) }}"
          alt="{{ product.name }}"
          loading="lazy"
          onerror="this.onerror=null; this.src='{{ url_for('static', filename='images/HyperFitlogo.jpeg') }}'"
        >

        {% if product.discounted_price %}
          <span class="discount-badge">
            -{{ product.discount_percent }}%
          </span>
        {% endif %}
      </a>

      <div class="product-info">
        <h3>{{ product.name }}</h3>

        {% if product.discounted_price %}
          <p class="price">
            <span class="old-price">₹{{ product.price }}</span>
            <span class="new-price">₹{{ product.discounted_price }}</span>
          </p>
        {% else %}
          <p class="price">₹{{ product.price }}</p>
        {% endif %}

        <a href="{{ url_for('product_detail', product_id=product.id) }}"
           class="view-btn">
          View Product
        </a>
      </div>

    </div>
    {% endfor %}

  </div>
  {% else %}
    <p class="empty-text">No products found.</p>
  {% endif %}

</main>

{% include "components/footer.html" %}

  <!-- JAVASCRIPT -->
  <script src="{{ url_for('static', filename='js/main.js') }}"></script>
</body>
</html>
