<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Create Account</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='css/auth.css') }}">
  <link rel="stylesheet" href="{{url_for('static', filename='css/main.css')}}">
</head>
<body>
{% include "components/navbar.html" %}

<div class="auth-box">
  <h2>Create Account</h2>

  <form method="POST">

    <input type="text" name="name" placeholder="Full Name" required>

    <select name="gender" required>
      <option value="">Select Gender</option>
      <option>Male</option>
      <option>Female</option>
      <option>Other</option>
    </select>

    <textarea name="address" placeholder="Full Address" required></textarea>

    <input type="tel" name="phone" placeholder="Phone Number" required>
    <button type="button" onclick="sendOtp('phone')">Send Phone OTP</button>
    <input type="text" id="phoneOtp" placeholder="Enter Phone OTP">
    <button type="button" onclick="verifyOtp('phone')">Verify</button>

    <input type="email" name="email" placeholder="Email Address" required>
    <button type="button" onclick="sendOtp('email')">Send Email OTP</button>
    <input type="text" id="emailOtp" placeholder="Enter Email OTP">
    <button type="button" onclick="verifyOtp('email')">Verify</button>

    <input type="password" name="password" placeholder="Password" required>

    <input type="password" name="confirm_password" placeholder="Confirm Password" required>

    <button type="submit">Register</button>

  </form>

  <div class="auth-links">
    <a href="/login">Already have an account? Login</a>
  </div>
</div>

{% include "components/footer.html" %}
  <script>
    function sendOtp(type) {
      const contact = document.getElementById(type).value;

      fetch("/send-otp", {
        method: "POST",
        headers: {"Content-Type": "application/json"},
        body: JSON.stringify({ contact, type })
      }).then(() => alert("OTP sent"));
    }

    function verifyOtp(type) {
      const contact = document.getElementById(type).value;
      const otp = document.getElementById(type + "Otp").value;

      fetch("/verify-otp", {
        method: "POST",
        headers: {"Content-Type": "application/json"},
        body: JSON.stringify({ contact, otp, type })
      })
      .then(res => res.json())
      .then(data => {
        alert(data.verified ? "Verified" : "Invalid OTP");
      });
    }
  </script>

</body>
</html>
