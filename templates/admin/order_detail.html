<!DOCTYPE html>
<html>
<head>
  <title>Order #{{ order.id }} – Admin</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='css/admin.css') }}">
</head>
<body>

<section class="page-container">

  <h2 class="page-title">Order #{{ order.id }}</h2>

  <!-- ORDER SUMMARY -->
  <div class="admin-card">
    <p><strong>Date:</strong> {{ order.created_at.strftime('%d %b %Y, %I:%M %p') }}</p>
    <p><strong>Status:</strong> {{ order.status }}</p>
    <p><strong>Payment Method:</strong> {{ order.payment_method }}</p>
    <p><strong>Total Amount:</strong> ₹{{ order.total_amount }}</p>
    <p><strong>Total Items:</strong> {{ total_items }}</p>
  </div>

  <!-- CUSTOMER INFO -->
  <div class="admin-card">
    <h3>Customer Details</h3>
    <p><strong>Name:</strong> {{ user.name }}</p>
    <p><strong>Email:</strong> {{ user.email }}</p>
    <p><strong>Phone:</strong> {{ user.phone }}</p>
  </div>

  <!-- DELIVERY ADDRESS -->
  <div class="admin-card">
    <h3>Delivery Address</h3>
    <p>{{ order.address }}</p>
  </div>

  <!-- ORDER ITEMS -->
  <div class="admin-card">
    <h3>Ordered Items</h3>

    <table class="admin-table">
      <thead>
        <tr>
          <th>Product</th>
          <th>Price</th>
          <th>Qty</th>
          <th>Subtotal</th>
        </tr>
      </thead>
      <tbody>
        {% for item in order.items %}
        <tr>
          <td>{{ item.product_name }}</td>
          <td>₹{{ item.price }}</td>
          <td>{{ item.quantity }}</td>
          <td>₹{{ item.price * item.quantity }}</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>

  <!-- UPDATE STATUS -->
  <div class="admin-card">
    <h3>Update Order Status</h3>

    <form method="POST" action="{{ url_for('update_order_status', order_id=order.id) }}">
      <select name="status">
        <option {% if order.status == "Placed" %}selected{% endif %}>Placed</option>
        <option {% if order.status == "Processing" %}selected{% endif %}>Processing</option>
        <option {% if order.status == "Shipped" %}selected{% endif %}>Shipped</option>
        <option {% if order.status == "Delivered" %}selected{% endif %}>Delivered</option>
        <option {% if order.status == "Cancelled" %}selected{% endif %}>Cancelled</option>
      </select>

      <button class="btn-primary">Update</button>
    </form>
  </div>

</section>

</body>
</html>
