<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/admin.css') }}">
    <title>Orders</title>
</head>
<body>
    
    <div class="admin-layout">

    <aside class="admin-sidebar">
        <h2>ADMIN</h2>
        <a href="/admin/dashboard">Dashboard</a>
        <a href="/admin/users">Users</a>
        <a href="/admin/products">Products</a>
        <a href="/admin/orders" class="active">Orders</a>
        <a href="/logout" class="logout">Logout</a>
    </aside>

        <main class="admin-main">
            {% block content %}
            <h2>Orders</h2>

            <table class="admin-table">
            <thead>
                <tr>
                <th>Order ID</th>
                <th>User</th>
                <th>Total</th>
                <th>Payment</th>
                <th>Status</th>
                <th>Date</th>
                <th>Cancel</th>
                <th>Return</th>
                <th>Action</th>
                <th>Cancellation</th>
                <th>Returning</th>
                </tr>
            </thead>

            <tbody>
                {% for order in orders %}
                <tr>
                <td>#{{ order.id }}</td>
                <td>{{ order.user.email }}</td>
                <td>â‚¹{{ order.total_amount }}</td>
                <td>{{ order.payment_method }}</td>
                <td>{{ order.status }}</td>
                <td>{{ order.created_at.strftime('%d %b %Y') }}</td>
                <td>
                    {% if order.cancel_requested %}
                    <span class="badge red">Cancel Requested</span>
                    {% endif %}
                </td>
                <td>
                    {% if order.return_requested %}
                    <span class="badge orange">Return Requested</span>
                    {% endif %}
                </td>
                <td>
                    <a href="{{ url_for('admin_order_detail', order_id=order.id) }}">
                    <button class="btn">View</button>
                    </a>
                </td>
                <td>
                    {% if order.cancel_requested %}
                    <form method="POST" action="{{ url_for('approve_cancel', order_id=order.id) }}">
                    <button class="btn danger">Approve Cancel</button>
                    </form>
                    {% endif %}
                </td>
                <td>
                    {% if order.return_requested %}
                    <form method="POST" action="{{ url_for('approve_return', order_id=order.id) }}">
                    <button class="btn warning">Approve Return</button>
                    </form>
                    {% endif %}
                </td>
                </tr>
                {% endfor %}

            </tbody>
            </table>
            {% endblock %}
        </main>
    </div>
</body>
</html>